<!-- 复杂的 sql 写在 这里  简单的 直接 拼接了    -->
<sqlGroup name="data">
    <sqlGroup name="billSnap">  
 
      <!--游戏类型和手数  -->
      <sql id="getGameTypeList">
      SELECT 
           gameroomtype, count(*) num,sum(totalgamenum) sum
      FROM 
          t_bill_base_info 
      WHERE 
          createtime  BETWEEN ? AND ?  AND overtag = 1 
      group by gameroomtype
      </sql>
      
      
      <sql id="getGameTypeVaildList">
      SELECT 
          gameroomtype, count(*) num 
      FROM 
            t_bill_base_info 
      WHERE 
             createtime  BETWEEN ? AND ? and  totalgamenum>=10 AND overtag = 1 
      group by gameroomtype
      </sql>
      
      
      <sql id="getGameSNGCount">
      SELECT 
           count(roomid) num 
      FROM 
           t_sng_bill_base_info  
      Where 
           createtime BETWEEN ? AND ? AND overtag = 1 
      </sql>
      
      <sql id="getGameSNGVaildCount">
      SELECT 
          count(roomid) num 
      FROM 
          t_sng_bill_base_info  
      WHERE 
          createtime BETWEEN ? AND ? and totalgamenum>=10  AND overtag = 1 
      </sql>
      
      <!--查玩家和服务费  -->
      <sql id="getPlayerList">
      SELECT
         gameroomtype,count(distinct uuid) num,sum(buystacks) sum 
      FROM 
         t_bill_info a join t_bill_base_info b on a.roomid=b.roomid  
      WHERE  
         createtime  BETWEEN ? AND ? and buystacks>0   AND overtag = 1 
      group by gameroomtype
      </sql>
      <sql id="getplayerSNGCount">
      SELECT
         count(distinct uuid) num 
      FROM
        t_bill_info a join t_sng_bill_base_info b on a.roomid=b.roomid  
      WHERE
      createtime  BETWEEN ? AND ? and buystacks>0 AND overtag = 1 
      
      </sql>
      
      <sql id="getBlindPlayerNumByType">
      SELECT
      bigblind,count(distinct uuid) num 
      FROM 
      t_bill_info a join t_bill_base_info b on a.roomid=b.roomid  
      WHERE  
      createtime  BETWEEN ? AND ? and buystacks>0 and gameroomtype=?   AND overtag = 1 
      group by bigblind
      </sql>
      
      <sql id="getBlindNumByType">
      SELECT 
          bigblind,COUNT(*) num 
      FROM 
          t_bill_base_info 
      WHERE 
          createtime  BETWEEN ? AND ? and gameroomtype = ?  AND overtag = 1 
      GROUP BY bigblind
      </sql> 
      
      <!-- 查手数 -->
  <!--     <sql id = "getTotalGameNumByType">
      SELECT
         gameroomtype,sum(totalgamenum) sum  
      FROM 
         t_bill_base_info  
      WHERE
         overtag=1 and createtime  BETWEEN ? AND ?
      GROUP BY
         gameroomtype
      </sql>
      
      各牌局服务费
      <sql>
      SElECT
      gameroomtype,sum(buystacks) sum 
      FROM
      test_poker.t_bill_info a join test_poker.t_bill_base_info b on a.roomid=b.roomid  
      WHERE 
      createtime  BETWEEN ? AND ? 
      GROUP BY gameroomtype;
      </sql> -->
      
      <sql id="getHandSNGNum">
      SELECT 
           sum(totalgamenum) sum 
      FROM 
           t_sng_bill_base_info  
      Where 
           createtime BETWEEN ? AND ? AND overtag = 1 
      </sql>
      
      <sql id="getServiceSNGNum">
      SELECT 
           sum(buystacks) sum 
      FROM 
           t_sng_bill_base_info  a join t_bill_info b on a.roomid = b.roomid
      Where 
           createtime BETWEEN ? AND ? AND overtag = 1
      </sql>
   
   
    </sqlGroup>
    
    <sqlGroup name="reportForms">
      <sql id="getGameInfoByDate">
        SELECT
              * 
        FROM
             t_game_daily_snapshot 
        WHERE isvalid= 0 and targetdate  BETWEEN ? AND ? 
      </sql>
      
      <sql id="getGameValidInfoByDate">
        SELECT
             *
        FROM
             t_game_daily_snapshot 
        WHERE isvalid= 1 and targetdate  BETWEEN ? AND ?
      </sql>
      
      <sql id="getBlindInfoByType">
        SELECT
             *
        FROM
             t_blinds_daily_snapshot 
        WHERE gameroomtype = ? and targetdate  BETWEEN ? AND ?
      
      
      </sql>
      
      <sql id = "getForeignUUID">
      
      select uuid from t_user_baseinfo where idtype = "ID_TYPE_FACEBOOK" or  countrycode != 86;
      
      </sql>
    </sqlGroup>
    
    <sqlGroup name="SinglePoker">
    <sql id ="getTimeByRoomid">
    SELECT 
    createtime,overtag
    FROM
    test_poker.t_bill_base_info
    WHERE
    roomid = ?
    </sql>
    
    
     <sql id="getRoomNameByid">
        SELECT
             roomname
        FROM
             t_bill_base_info
        WHERE 
             roomid =?
     </sql>
     
     <sql id="getUserNickNameByid">
        SELECT
             nickname
        FROM
             t_user_baseinfo 
        WHERE 
             uuid =?
     
     
     </sql>
    </sqlGroup >
    
    <sqlGroup name="dailyReport">
    <sql  id = "getRechargeByDay">
       SELECT 
       * 
       FROM 
       t_recharge_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    <sql  id = "getRechargeNumByDay">
       SELECT 
       sum(sum) 
       FROM 
       t_recharge_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    <sql id ="getMoneyByDay">
     SELECT 
       * 
       FROM 
       t_money_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    <sql id ="getMoneyNumByDay">
       SELECT 
       sum(sum)
       FROM 
       t_money_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    
    <sql id ="getDiamondByDay">
     SELECT 
       * 
       FROM 
       t_diamond_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    <sql id="getDiamondNumByDay">
       SELECT 
       sum(sum)
       FROM 
       t_diamond_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    <sql id ="getAddDiamondByDay">
     SELECT 
       * 
       FROM 
       t_diamond_recharge_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    <sql id="getAddDiamondNumByDay">
       SELECT 
       sum(sum)
       FROM 
       t_diamond_recharge_daily_snapshot
       WHERE 
       type = ? and targetdate  BETWEEN ? AND ?
    </sql>
    
    
    
     <sql id="getGameInfoByDay">
        SELECT
          targetdate,g_normal,g_normalins,g_omaha,g_omahains,g_six,g_sng,g_sum
        FROM
             t_game_daily_snapshot 
        WHERE 
             isvalid= ? and targetdate  BETWEEN ? AND ? 
      </sql>
   
     
     <sql id="getGameNumByDay">
        SELECT
        sum(g_sum)      
        FROM
             t_game_daily_snapshot 
        WHERE isvalid= ? and targetdate  BETWEEN ? AND ? 
      </sql>
   
      <sql id="getPlyerInfoByDay">
        SELECT
        targetdate,p_normal,p_normalins,p_omaha,p_omahains,p_six,p_sng,p_sum
        FROM
             t_game_daily_snapshot 
        WHERE isvalid= ? and targetdate  BETWEEN ? AND ? 
      </sql>
      
      <sql id="getPlyerNumByDay">
        SELECT
        sum(p_sum)      
        FROM
             t_game_daily_snapshot 
        WHERE isvalid= ? and targetdate  BETWEEN ? AND ? 
      </sql>
      
      
      <!-- 服务费 -->
      <sql id="getServiceByDay">
      SELECT
        targetdate,s_normal,s_normalins,s_omaha,s_omahains,s_six,s_sng,s_sum
        FROM
             t_game_ext_daily_snapshot 
        WHERE targetdate  BETWEEN ? AND ? 
      
      
      </sql>
      <!--服务费总数  -->
      <sql id="getServiceNumByDay">
        SELECT
          sum(s_sum)      
        FROM
             t_game_ext_daily_snapshot 
        WHERE targetdate  BETWEEN ? AND ? 
      </sql>
      
      <!-- 手数 -->
      <sql id="getHandByDay">
      SELECT
        targetdate,h_normal,h_normalins, h_omaha,_h_omahains,h_six,h_sng,h_sum
        FROM
             t_game_ext_daily_snapshot 
        WHERE targetdate  BETWEEN ? AND ?  
      </sql>
       <sql id="getHandNumByDay">
        SELECT
          sum(h_sum)      
        FROM
             t_game_ext_daily_snapshot 
        WHERE targetdate  BETWEEN ? AND ? 
      </sql>
    
    </sqlGroup>

    <sqlGroup name="clubWeek">
        <sql id="getClubLevelWeeklyWithPage">
            select clubId,date,clubName,roomidNum,numWeek,cheatTimes,
            timesPer,timesWeek,clubNum,clubTimes,leagNum,leagTimes,
            maxPerson,personNum,personChange,personWeek,exp,expLevel,
            expChan,levelChan,Host,leaName
            from t_club_exange
            where
            date_format(date,'%Y-%m-%d') >=?
            and ?>=date_format(date,'%Y-%m-%d') limit ?,?
        </sql>

        <sql id="getClubLevelWeeklyWithoutPage">
            select clubId,date,clubName,roomidNum,numWeek,cheatTimes,
            timesPer,timesWeek,clubNum,clubTimes,leagNum,leagTimes,
            maxPerson,personNum,personChange,personWeek,exp,expLevel,
            expChan,levelChan,Host,leaName,CONCAT(personNum,'/',maxPerson) as person
            from t_club_exange
            where
            date_format(date,'%Y-%m-%d') >=?
            and ?>=date_format(date,'%Y-%m-%d')
        </sql>

        <sql id="getClubLevelWeeklyCount">
            select count(*)
            from t_club_exange
            where
            date_format(date,'%Y-%m-%d') >=?
            and ?>=date_format(date,'%Y-%m-%d')
        </sql>

    </sqlGroup>
</sqlGroup>