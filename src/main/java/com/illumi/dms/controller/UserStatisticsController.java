package com.illumi.dms.controller;import com.illumi.dms.common.Consts;import com.illumi.dms.common.utils.SqlUtils;import com.illumi.dms.model.ActiveUser;import com.jayqqaa12.jbase.jfinal.ext.ctrl.EasyuiController;import com.jayqqaa12.model.easyui.DataGrid;import com.jfinal.ext.route.ControllerBind;import org.apache.log4j.Logger;import java.util.HashMap;import java.util.Map;@ControllerBind(controllerKey = "/statistic/user",viewPath="/page/system")public class UserStatisticsController  extends EasyuiController {    // http://localhost:8080/statistic/user/list?start_time=2018-04-01&end_time=2019-01-01&is_abroad=1&page=1&order=asc&sortField=date    private static final  Logger logger = Logger.getLogger(UserStatisticsController.class);    public void  list(){        Integer page = getParaToInt(Consts.PAGE);        String order = getPara(Consts.ORDER);        String sortField = getPara(Consts.SORT_FIELD);        Map<String,Object> map = new HashMap<>();        map.put(Consts.START_TIME,getPara(Consts.START_TIME));        map.put(Consts.END_TIME,getPara(Consts.END_TIME));        map.put(Consts.IS_ABROAD,getPara(Consts.IS_ABROAD));        map.put(Consts.PERIOD,getPara(Consts.PERIOD));        String where =SqlUtils.concatSql(map);        DataGrid<ActiveUser> dg = new DataGrid();        dg.sortName = this.getPara("sort", sortField);        dg.sortOrder = this.getPara("order", order);        dg.page = this.getParaToInt("page", page);        dg.total = this.getParaToInt("rows", Consts.TOTAL);        renderJson(ActiveUser.dao.listByDataGridBySortSql(dg,getFrom(ActiveUser.dao.tableName),where));    }}